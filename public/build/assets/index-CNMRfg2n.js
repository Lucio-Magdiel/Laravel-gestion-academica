import{r,j as s,c as F,L as Y,a as fe,H as pe}from"./app-DiX2iUY_.js";import{B as ue}from"./badge-Biuh9D78.js";import{u as xe,B as v}from"./app-logo-icon-DykWE0b1.js";import{c as Z,d as ee}from"./card-Bm9OpUZc.js";import{T as he,a as be,b as se,c as P,d as je,e as E}from"./table-DDQs5VOm.js";import{u as ge,A as Ne}from"./app-layout-Hkk09ObM.js";import{u as Ce,c as ve,a as ye,P as De,b as Se}from"./index-Bh8Vh193.js";import{P as J}from"./index-jZxJnykt.js";import{D as _e,a as Te,b as Re,c as we,d as Ae,e as Pe}from"./dialog-ChbkgC_F.js";import{C as Ee}from"./chevron-down-DVEuj9A4.js";import{P as Oe,T as Ie,a as $e,b as ke}from"./triangle-alert-Dswzo-Pw.js";/* empty css            */import"./index-BCjkl18T.js";var G="Collapsible",[Be,ts]=ve(G),[Le,K]=Be(G),ae=r.forwardRef((l,e)=>{const{__scopeCollapsible:n,open:t,defaultOpen:a,disabled:m,onOpenChange:c,...g}=l,[y,f]=Ce({prop:t,defaultProp:a??!1,onChange:c,caller:G});return s.jsx(Le,{scope:n,disabled:m,contentId:ge(),open:y,onOpenToggle:r.useCallback(()=>f(N=>!N),[f]),children:s.jsx(J.div,{"data-state":U(y),"data-disabled":m?"":void 0,...g,ref:e})})});ae.displayName=G;var oe="CollapsibleTrigger",re=r.forwardRef((l,e)=>{const{__scopeCollapsible:n,...t}=l,a=K(oe,n);return s.jsx(J.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":U(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...t,ref:e,onClick:ye(l.onClick,a.onOpenToggle)})});re.displayName=oe;var Q="CollapsibleContent",ie=r.forwardRef((l,e)=>{const{forceMount:n,...t}=l,a=K(Q,l.__scopeCollapsible);return s.jsx(De,{present:n||a.open,children:({present:m})=>s.jsx(Me,{...t,ref:e,present:m})})});ie.displayName=Q;var Me=r.forwardRef((l,e)=>{const{__scopeCollapsible:n,present:t,children:a,...m}=l,c=K(Q,n),[g,y]=r.useState(t),f=r.useRef(null),N=xe(e,f),u=r.useRef(0),x=u.current,h=r.useRef(0),b=h.current,d=c.open||g,j=r.useRef(d),i=r.useRef(void 0);return r.useEffect(()=>{const o=requestAnimationFrame(()=>j.current=!1);return()=>cancelAnimationFrame(o)},[]),Se(()=>{const o=f.current;if(o){i.current=i.current||{transitionDuration:o.style.transitionDuration,animationName:o.style.animationName},o.style.transitionDuration="0s",o.style.animationName="none";const C=o.getBoundingClientRect();u.current=C.height,h.current=C.width,j.current||(o.style.transitionDuration=i.current.transitionDuration,o.style.animationName=i.current.animationName),y(t)}},[c.open,t]),s.jsx(J.div,{"data-state":U(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!d,...m,ref:N,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...l.style},children:d&&a})});function U(l){return l?"open":"closed"}var He=ae;function te(l){const e=F.c(4);let n;e[0]!==l?({...n}=l,e[0]=l,e[1]=n):n=e[1];let t;return e[2]!==n?(t=s.jsx(He,{"data-slot":"collapsible",...n}),e[2]=n,e[3]=t):t=e[3],t}function ne(l){const e=F.c(4);let n;e[0]!==l?({...n}=l,e[0]=l,e[1]=n):n=e[1];let t;return e[2]!==n?(t=s.jsx(re,{"data-slot":"collapsible-trigger",...n}),e[2]=n,e[3]=t):t=e[3],t}function le(l){const e=F.c(4);let n;e[0]!==l?({...n}=l,e[0]=l,e[1]=n):n=e[1];let t;return e[2]!==n?(t=s.jsx(ie,{"data-slot":"collapsible-content",...n}),e[2]=n,e[3]=t):t=e[3],t}const Fe=[{title:"Dashboard",href:"/dashboard"},{title:"Asignaciones",href:"/asignaciones"}];function ns(l){const e=F.c(48),{asignaciones:n}=l,[t,a]=r.useState(null),[m,c]=r.useState(!1);let g;e[0]===Symbol.for("react.memo_cache_sentinel")?(g=M=>{a(M),c(!0)},e[0]=g):g=e[0];const y=g;let f;e[1]!==t?(f=()=>{t&&fe.delete(`/asignaciones/${t.id}`,{onSuccess:()=>{c(!1),a(null)}})},e[1]=t,e[2]=f):f=e[2];const N=f;let u,x,h,b,d,j,i;if(e[3]!==n){const M=n.reduce(Ge,{});u=Ne,j=Fe,e[11]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(pe,{title:"Gestión de Asignaciones"}),e[11]=i):i=e[11],b="flex h-full flex-1 flex-col gap-6 p-6";let H;e[12]===Symbol.for("react.memo_cache_sentinel")?(H=s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Asignaciones Docentes"}),s.jsx("p",{className:"text-muted-foreground",children:"Asignación de docentes a módulos académicos"})]}),e[12]=H):H=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsxs("div",{className:"flex items-center justify-between",children:[H,s.jsx(Y,{href:"/asignaciones/create",children:s.jsxs(v,{className:"gap-2",children:[s.jsx($e,{className:"h-4 w-4"}),"Nueva Asignación"]})})]}),e[13]=d):d=e[13],x="space-y-4",h=Object.keys(M).length===0?s.jsx(Z,{children:s.jsx(ee,{className:"flex flex-col items-center justify-center py-10 text-muted-foreground",children:s.jsx("p",{children:"No hay asignaciones registradas"})})}):Object.entries(M).map(ce=>{const[de,V]=ce;return s.jsxs(te,{className:"space-y-2",children:[s.jsx("div",{className:"flex items-center justify-between space-x-4 px-4",children:s.jsx(ne,{asChild:!0,children:s.jsxs(v,{variant:"ghost",className:"flex w-full justify-between p-0 hover:bg-transparent",children:[s.jsx("h2",{className:"text-xl font-semibold text-primary",children:V.nombre}),s.jsx(Ee,{className:"h-4 w-4 transition-transform duration-200"})]})})}),s.jsx(le,{className:"space-y-2",children:Object.entries(V.secciones).sort().map(me=>{const[W,X]=me;return s.jsxs(te,{className:"ml-4 border-l-2 border-muted pl-4",children:[s.jsx(ne,{asChild:!0,children:s.jsxs(v,{variant:"outline",className:"mb-2 flex w-full justify-between",children:[s.jsxs("span",{children:["Sección ",W]}),s.jsxs(ue,{variant:"secondary",children:[X.length," asignaciones"]})]})}),s.jsx(le,{children:s.jsx(Z,{children:s.jsx(ee,{className:"p-0",children:s.jsxs(he,{children:[s.jsx(be,{children:s.jsxs(se,{children:[s.jsx(P,{children:"Docente"}),s.jsx(P,{children:"Módulo"}),s.jsx(P,{children:"Turno"}),s.jsx(P,{children:"Período"}),s.jsx(P,{className:"text-right",children:"Acciones"})]})}),s.jsx(je,{children:X.map(p=>s.jsxs(se,{children:[s.jsx(E,{className:"font-medium",children:p.docente?.name||"N/A"}),s.jsx(E,{children:s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:p.modulo?.nombre}),s.jsx("p",{className:"text-sm text-muted-foreground",children:p.modulo?.codigo})]})}),s.jsxs(E,{children:[p.turno?.nombre,s.jsxs("p",{className:"text-sm text-muted-foreground",children:[p.turno?.hora_inicio," - ",p.turno?.hora_fin]})]}),s.jsx(E,{children:p.periodo_academico?.nombre}),s.jsx(E,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(Y,{href:`/asignaciones/${p.id}/edit`,children:s.jsx(v,{variant:"outline",size:"sm",children:s.jsx(Oe,{className:"h-4 w-4"})})}),s.jsx(v,{variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50 hover:text-red-700",onClick:()=>y(p),children:s.jsx(Ie,{className:"h-4 w-4"})})]})})]},p.id))})]})})})})]},W)})})]},de)}),e[3]=n,e[4]=u,e[5]=x,e[6]=h,e[7]=b,e[8]=d,e[9]=j,e[10]=i}else u=e[4],x=e[5],h=e[6],b=e[7],d=e[8],j=e[9],i=e[10];let o;e[14]!==x||e[15]!==h?(o=s.jsx("div",{className:x,children:h}),e[14]=x,e[15]=h,e[16]=o):o=e[16];let C;e[17]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs(_e,{className:"flex items-center gap-2 text-red-600",children:[s.jsx(ke,{className:"h-5 w-5"}),"Confirmar Eliminación"]}),e[17]=C):C=e[17];let O;e[18]===Symbol.for("react.memo_cache_sentinel")?(O=s.jsx("br",{}),e[18]=O):O=e[18];const q=t?.docente?.name;let D;e[19]!==q?(D=s.jsx("span",{className:"font-bold text-foreground",children:q}),e[19]=q,e[20]=D):D=e[20];let I;e[21]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx("br",{}),e[21]=I):I=e[21];const z=t?.modulo?.nombre;let S;e[22]!==z?(S=s.jsx("span",{className:"font-bold text-foreground",children:z}),e[22]=z,e[23]=S):S=e[23];let $,k;e[24]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx("br",{}),k=s.jsx("br",{}),e[24]=$,e[25]=k):($=e[24],k=e[25]);let _;e[26]!==D||e[27]!==S?(_=s.jsxs(Te,{children:[C,s.jsxs(Re,{className:"pt-2",children:["¿Estás seguro de que deseas eliminar esta asignación?",O,"Docente: ",D,I,"Módulo: ",S,$,k,"Esta acción no se puede deshacer."]})]}),e[26]=D,e[27]=S,e[28]=_):_=e[28];let B;e[29]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(v,{variant:"outline",onClick:()=>c(!1),children:"Cancelar"}),e[29]=B):B=e[29];let T;e[30]!==N?(T=s.jsxs(we,{className:"gap-2 sm:gap-0",children:[B,s.jsx(v,{variant:"destructive",onClick:N,children:"Eliminar Asignación"})]}),e[30]=N,e[31]=T):T=e[31];let R;e[32]!==_||e[33]!==T?(R=s.jsxs(Ae,{children:[_,T]}),e[32]=_,e[33]=T,e[34]=R):R=e[34];let w;e[35]!==m||e[36]!==R?(w=s.jsx(Pe,{open:m,onOpenChange:c,children:R}),e[35]=m,e[36]=R,e[37]=w):w=e[37];let A;e[38]!==w||e[39]!==b||e[40]!==d||e[41]!==o?(A=s.jsxs("div",{className:b,children:[d,o,w]}),e[38]=w,e[39]=b,e[40]=d,e[41]=o,e[42]=A):A=e[42];let L;return e[43]!==u||e[44]!==A||e[45]!==j||e[46]!==i?(L=s.jsxs(u,{breadcrumbs:j,children:[i,A]}),e[43]=u,e[44]=A,e[45]=j,e[46]=i,e[47]=L):L=e[47],L}function Ge(l,e){const n=e.modulo?.semestre?.nombre||"Sin Semestre",t=e.modulo?.semestre?.id||0;l[t]||(l[t]={nombre:n,secciones:{}});const a=e.seccion?.nombre||"Sin Sección";return l[t].secciones[a]||(l[t].secciones[a]=[]),l[t].secciones[a].push(e),l}export{ns as default};
