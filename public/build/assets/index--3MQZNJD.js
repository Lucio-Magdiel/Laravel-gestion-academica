import{c as V,r as R,j as s,L as z,a as W,H as Y}from"./app-DiX2iUY_.js";import{I as Z}from"./input-EjaSAc9y.js";import{B as ee}from"./badge-Biuh9D78.js";import{a as se,B as b}from"./app-logo-icon-DykWE0b1.js";import{c as te,C as re,a as ae,b as le,d as oe}from"./card-Bm9OpUZc.js";import{T as ie,a as ne,b as q,c as g,d as ce,e as m}from"./table-DDQs5VOm.js";import{d as de,H as me,A as xe}from"./app-layout-Hkk09ObM.js";import{D as he,a as be,b as ge,c as ue,d as fe,e as pe}from"./dialog-ChbkgC_F.js";import{P as je,T as ye,a as Ne,b as ve}from"./triangle-alert-Dswzo-Pw.js";/* empty css            */import"./index-Bh8Vh193.js";import"./index-jZxJnykt.js";import"./index-BCjkl18T.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],we=se("Search",Ce),De=[{title:"Dashboard",href:"/dashboard"},{title:"Usuarios",href:"/usuarios"}],Se={super_admin:"Super Admin",administracion:"Administración",docente:"Docente",estudiante:"Estudiante"};function qe(G){const e=V.c(31),{usuarios:E}=G,[a,P]=R.useState(null),[I,u]=R.useState(!1);let f;e[0]===Symbol.for("react.memo_cache_sentinel")?(f={},e[0]=f):f=e[0];const[U,F]=R.useState(f);let p;e[1]===Symbol.for("react.memo_cache_sentinel")?(p=x=>{P(x),u(!0)},e[1]=p):p=e[1];const K=p;let j;e[2]!==a?(j=()=>{a&&W.delete(`/usuarios/${a.id}`,{onSuccess:()=>{u(!1),P(null)}})},e[2]=a,e[3]=j):j=e[3];const $=j;let y;e[4]===Symbol.for("react.memo_cache_sentinel")?(y=(x,r)=>{F(h=>({...h,[x]:r}))},e[4]=y):y=e[4];const X=y;let N;e[5]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx(Y,{title:"Gestión de Usuarios"}),e[5]=N):N=e[5];let v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v=s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Usuarios"}),s.jsx("p",{className:"text-muted-foreground",children:"Gestión de usuarios del sistema"})]}),e[6]=v):v=e[6];let C;e[7]===Symbol.for("react.memo_cache_sentinel")?(C=s.jsxs("div",{className:"flex items-center justify-between",children:[v,s.jsx(z,{href:"/usuarios/create",children:s.jsxs(b,{className:"gap-2",children:[s.jsx(Ne,{className:"h-4 w-4"}),"Nuevo Usuario"]})})]}),e[7]=C):C=e[7];let w;e[8]===Symbol.for("react.memo_cache_sentinel")?(w=Object.entries(Se),e[8]=w):w=e[8];let l;e[9]!==U||e[10]!==E?(l=s.jsx("div",{className:"space-y-6",children:w.map(x=>{const[r,h]=x,B=U[r]||"",H=B.toLowerCase(),O=E.filter(t=>(t.rol||"estudiante")===r).filter(t=>{if(!B)return!0;const J=(t.nombre_completo||t.name||"").toLowerCase(),M=(t.email||"").toLowerCase(),Q=(t.dni||"").toLowerCase();return J.includes(H)||M.includes(H)||Q.includes(H)}),L={super_admin:{border:"border-purple-500/50",bg:"bg-purple-500/5 hover:bg-purple-500/10",text:"text-purple-700 dark:text-purple-400",badge:"bg-purple-500/10 text-purple-700 dark:text-purple-300 hover:bg-purple-500/20"},administracion:{border:"border-blue-500/50",bg:"bg-blue-500/5 hover:bg-blue-500/10",text:"text-blue-700 dark:text-blue-400",badge:"bg-blue-500/10 text-blue-700 dark:text-blue-300 hover:bg-blue-500/20"},docente:{border:"border-green-500/50",bg:"bg-green-500/5 hover:bg-green-500/10",text:"text-green-700 dark:text-green-400",badge:"bg-green-500/10 text-green-700 dark:text-green-300 hover:bg-green-500/20"},estudiante:{border:"border-gray-500/50",bg:"bg-gray-500/5 hover:bg-gray-500/10",text:"text-gray-700 dark:text-gray-400",badge:"bg-gray-500/10 text-gray-700 dark:text-gray-300 hover:bg-gray-500/20"}}[r]||{border:"border-gray-500/50",bg:"bg-gray-500/5",text:"text-gray-700",badge:"bg-gray-100 text-gray-800"};return s.jsxs(te,{className:`overflow-hidden border ${L.border} ${L.bg} shadow-sm transition-colors duration-200`,children:[s.jsx(re,{className:"pb-4",children:s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsxs(ae,{className:`flex items-center gap-2 text-xl ${L.text}`,children:[h,s.jsx(ee,{variant:"secondary",className:`ml-2 border-0 ${L.badge}`,children:O.length})]}),s.jsxs(le,{className:"mt-1",children:["Usuarios registrados como ",h.toLowerCase()]})]}),s.jsxs("div",{className:"relative w-full sm:w-64",children:[s.jsx(we,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),s.jsx(Z,{placeholder:`Buscar ${h.toLowerCase()}...`,className:"bg-background/50 pl-9",value:B,onChange:t=>X(r,t.target.value)})]})]})}),s.jsx(oe,{children:s.jsxs(ie,{children:[s.jsx(ne,{children:s.jsxs(q,{children:[s.jsx(g,{children:"Nombre"}),s.jsx(g,{children:"Email"}),s.jsx(g,{children:"DNI"}),s.jsx(g,{children:"Estado"}),s.jsx(g,{className:"text-right",children:"Acciones"})]})}),s.jsx(ce,{children:O.length===0?s.jsx(q,{children:s.jsx(m,{colSpan:5,className:"text-center text-muted-foreground py-6",children:"No hay usuarios registrados con este rol"})}):O.map(t=>s.jsxs(q,{children:[s.jsx(m,{className:"font-medium",children:t.nombre_completo||t.name}),s.jsx(m,{children:t.email}),s.jsx(m,{children:t.dni}),s.jsx(m,{children:t.activo?s.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[s.jsx(de,{className:"h-4 w-4"}),"Activo"]}):s.jsxs("span",{className:"flex items-center gap-1 text-red-600",children:[s.jsx(me,{className:"h-4 w-4"}),"Inactivo"]})}),s.jsx(m,{className:"text-right",children:s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(z,{href:`/usuarios/${t.id}/edit`,children:s.jsx(b,{variant:"outline",size:"sm",children:s.jsx(je,{className:"h-4 w-4"})})}),s.jsx(b,{variant:"outline",size:"sm",className:"text-red-600 hover:bg-red-50 hover:text-red-700",onClick:()=>K(t),children:s.jsx(ye,{className:"h-4 w-4"})})]})})]},t.id))})]})})]},r)})}),e[9]=U,e[10]=E,e[11]=l):l=e[11];let D;e[12]===Symbol.for("react.memo_cache_sentinel")?(D=s.jsxs(he,{className:"flex items-center gap-2 text-red-600",children:[s.jsx(ve,{className:"h-5 w-5"}),"Confirmar Eliminación"]}),e[12]=D):D=e[12];const A=a?.nombre_completo||a?.name;let o;e[13]!==A?(o=s.jsx("span",{className:"font-bold text-foreground",children:A}),e[13]=A,e[14]=o):o=e[14];let S,_;e[15]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx("br",{}),_=s.jsx("br",{}),e[15]=S,e[16]=_):(S=e[15],_=e[16]);let i;e[17]!==o?(i=s.jsxs(be,{children:[D,s.jsxs(ge,{className:"pt-2",children:["¿Estás seguro de que deseas eliminar al usuario ",o,"?",S,_,"Esta acción eliminará permanentemente al usuario y todos sus datos asociados. Esta acción no se puede deshacer."]})]}),e[17]=o,e[18]=i):i=e[18];let k;e[19]===Symbol.for("react.memo_cache_sentinel")?(k=s.jsx(b,{variant:"outline",onClick:()=>u(!1),children:"Cancelar"}),e[19]=k):k=e[19];let n;e[20]!==$?(n=s.jsxs(ue,{className:"gap-2 sm:gap-0",children:[k,s.jsx(b,{variant:"destructive",onClick:$,children:"Eliminar Usuario"})]}),e[20]=$,e[21]=n):n=e[21];let c;e[22]!==i||e[23]!==n?(c=s.jsxs(fe,{children:[i,n]}),e[22]=i,e[23]=n,e[24]=c):c=e[24];let d;e[25]!==I||e[26]!==c?(d=s.jsx(pe,{open:I,onOpenChange:u,children:c}),e[25]=I,e[26]=c,e[27]=d):d=e[27];let T;return e[28]!==d||e[29]!==l?(T=s.jsxs(xe,{breadcrumbs:De,children:[N,s.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[C,l,d]})]}),e[28]=d,e[29]=l,e[30]=T):T=e[30],T}export{qe as default};
